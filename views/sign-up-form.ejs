<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <!--GOOGLE FONT-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif&display=swap" rel="stylesheet" />
    <!--CDN-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
    <!--stylesheet link-->
    <script src="https://kit.fontawesome.com/6b4b5cfca8.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <title>Sign up</title>
</head>

<body>
    <section id="sign-up">
        <% if (errors) {%>
            <div class="alert">
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                <%= errors %>
            </div>
            <% } %>
                <div id="sign-up-box" class="login-box">
                    <h2>Sign Up</h2>
                    <form action="" method="POST" autocomplete="off" id="signupForm">
                        <div class="user-box">
                            <input name="email" type="text" />
                            <label class="sign-up-label">Email</label>
                        </div>
                        <div class="user-box-inline">
                            <div class="user-box same-line">
                                <input name="age" type="text" />
                                <label class="sign-up-label">Age</label>
                            </div>
                            <div class="user-box same-line">
                                <input name="fullname" type="text" />
                                <label class="sign-up-label">Full Name</label>
                            </div>
                        </div>
                        <div class="user-box">
                            <input type="text" name="username">
                            <label class="sign-up-label">
                                Username
                            </label>
                            <div class="more-info">[<i class="fa fa-solid fa-question"></i>]</div>
                            <div class="info-box">
                                <ul>
                                    <li>username must have between 4 and 20 characters
                                    </li>
                                    <li>username must not contain anything but letters a-z, digits 0-9 and special
                                        characters
                                        -._
                                    </li>
                                    <li>the special characters -._ must not be used successively in order to avoid
                                        confusion
                                    </li>
                                    <li>the username must not contain whitespaces</li>
                                    <li>username can not contain CAPITAL LETTERS</li>
                                </ul>
                            </div>
                        </div>
                        <div class="user-box">
                            <input type="password" name="password" id="password" autocomplete="new-password">
                            <label class="sign-up-label">Password</label>
                        </div>
                        <div class="user-box">
                            <input type="password" name="confirm_password" id="confirm_password">

                            <label class="sign-up-label">Confirm Password <span id='message'></span></label>

                        </div>
                        <button type="submit">
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            Submit
                        </button>
                        <p id="sign-up-link">already have an acount? <a href="/">log in</a></p>

                    </form>
                </div>
    </section>

    <!--scripts-->
    <!--jquery-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
    <!--jquery validator-->
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
    <!--script validator jquery-->
    <script>
        $().ready(function () {
            $("#signupForm").validate({
                rules: {
                    fullname: "required",
                    age: {
                        required: true,
                        ageCheck: true
                    },
                    username: {
                        required: true,
                        usernameCheck: true,
                    },
                    password: {
                        required: true,
                        passwordCheck: true
                    },
                    confirm_password: {
                        required: true,
                        equalTo: "#password"
                    },
                    email: {
                        required: true,
                        email: true
                    },

                },
                messages: {
                    fullname: "please enter your fullname",
                    username: {
                        required: "please enter a username",
                        minlength: "username must be at least 4 characters"
                    },
                    password: {
                        required: "please provide a password",
                    },
                    confirm_password: {
                        required: "please provide a password",
                        equalTo: "passwords do not match"
                    }
                }
            });
            jQuery.validator.addMethod("passwordCheck", function (value, element) {
                return this.optional(element) || /^(?=(.*[a-zA-Z]){1,})(?=(.*[0-9]){2,}).{6,}$/.test(value);
            }, "password must contain atleast 6 characters and 2 numbers");
            jQuery.validator.addMethod("ageCheck", function (value, element) {
                return this.optional(element) || /^\d{2}$/.test(value);
            }, "please enter a valid age");
            jQuery.validator.addMethod("usernameCheck", function (value, element) {
                return this.optional(element) || /^([a-z0-9]|[-._](?![-._])){4,20}$/.test(value);
            }, "invalid username");
        })
    </script>
    <!-- sign-up-errors -->
    <script>
        // Get all elements with class="closebtn"
        var close = document.getElementsByClassName("closebtn");
        var i;

        // Loop through all close buttons
        for (i = 0; i < close.length; i++) {
            // When someone clicks on a close button
            close[i].onclick = function () {

                // Get the parent of <span class="closebtn"> (<div class="alert">)
                var div = this.parentElement;

                // Set the opacity of div to 0 (transparent)
                div.style.opacity = "0";

                // Hide the div after 600ms (the same amount of milliseconds it takes to fade out)
                setTimeout(function () { div.style.display = "none"; }, 600);
            }
        }
    </script>
</body>


</html>