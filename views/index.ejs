<!DOCTYPE html>
<html>

<head>
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
  <!--GOOGLE FONT-->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif&display=swap" rel="stylesheet" />
  <!--CDN-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
  <!--instant search-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@7/themes/algolia-min.css" />
  <!--stylesheet link-->
  <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/stylesheets/style.css" />
</head>

<body>
  <% if (user) { %>
    <div class="bg">
      <!---nav--->
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">Poster Mania</a>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <div class="d-flex">
              <a class="nav-link right-side" aria-current="page" href="/">
                <i class="fa-solid fa-house"></i>
              </a>
              <a class="nav-link right-side" href="/cart">

                <i class="fa-solid fa-cart-shopping"></i>
                <% if (session.cart) { %>
                  <span class=""><sup>
                      <%= session.cart.totalQnty %>
                    </sup></span>
                  <% } %>
              </a>
              <a class="nav-link right-side" href="
              "><i class="fa-solid fa-bell"></i></a>
              <div class="dropdown">
                <a href="#" class="nav-flex align-items-center link-dark text-decoration-none dropdown-toggle"
                  id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                  <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
                  <strong>
                    <%= user.username %>
                  </strong>
                </a>
                <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser2" style="">
                  <li><a class="dropdown-item" href="/new">Upload new...</a></li>
                  <li><a class="dropdown-item" href="#">Settings</a></li>
                  <li><a class="dropdown-item" href="/<%= user.username %> ">Profile</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="/log-out">Sign out</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <!--products-->
      <h1 id="products" class="center">Trending</h1>
      <div class="container">
        <div class="flex-row">
          <% for(let i=0 ; i < products.length; i++){ %>
            <% if ([i] < 8) { %>
              <div class="product">
                <div class="imgs-product">
                  <img src="/images/IMG_bg.avif" alt="background" class="img-bg">
                  <img src="<%= products[i].image%>" class="img-fluid img-product" />
                  <img src="/images/clip-front.png" alt="clips" class="img-front">

                  <div class="overlay">
                    <div class="overlay-btn">
                      <a href="/add-to-likes/<%= products[i]._id %>" class="no-highlight">
                        <button type="button" class="circle-btn">
                          <i class="fa fa-solid fa-heart"></i>
                        </button>
                      </a>
                      <a href="/add-to-cart/<%= products[i]._id %>" class="no-highlight">
                        <button type="button" class="circle-btn" id="cart-btn">
                          <i class="fa fa-solid fa-cart-plus"></i>
                        </button>
                      </a>
                    </div>

                    <a href="product/<%= products[i]._id %>" class="img-fluid img-product">
                      <img src="<%= products[i].image%>" class="img-href" />
                    </a>
                  </div>
                </div>
                <div class="card-info">
                  <a href="product/<%= products[i]._id %>">
                    <h5>
                      <%= products[i].name %>
                    </h5>
                  </a>
                  <h5 class="price">
                    <a href="product/<%= products[i]._id %>" class="no-highlight">
                      <sup class="sup">EGP</sup>
                      <%= products[i].price %>
                    </a>
                  </h5>
                </div>
              </div>
              <% } %>
                <% } %>
        </div>

        <div class="flex-center">
          <h5 class="viewMore"><a class="center" href="/products">view more &#8594</a></h5>
        </div>
      </div>

      <!--GENRES-->
      <h1 class="center" id="genres">Genres</h1>
      <div class="container text-center my-3">
        <div class="row mx-auto my-auto justify-content-center">
          <div id="recipeCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Abstract">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-psd/black-white-glow-dust-particle-abstract-background_35672-1431.jpg?w=826"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Abstract</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Dark">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/aesthetic-universe-nature-background-earth-mountain-remixed-media_53876-128642.jpg?t=st=1655564438~exp=1655565038~hmac=050026269866caee4a31ce67e023cb124298e1d6c5cfa040fd342a6daaf23ca2&w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Dark</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Digital-Art">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-vector/set-hipster-retro-cool-psychedelic-elements-collection-groovy-cliparts-from-70s-editab_648811-122.jpg?w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Digital Art</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Fantasy">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/challenger-stands-front-spooky-castle-illustration_456031-14.jpg?t=st=1655566219~exp=1655566819~hmac=a8ae0b4db0cb2eedcb445433962e5aae7a595543a2185743cbfd0173783771c7&w=996"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Fantasy</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Horror">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/abandoned-alley-psychiatric-hospital_1150-18953.jpg?t=st=1655566267~exp=1655566867~hmac=798409288cbc5a347c925c5e98e88afd2a3bbf294ff42b7866a0567032167873&w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Horror</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Merch">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-psd/folded-black-polo-shirt-label_125540-1510.jpg?t=st=1655566313~exp=1655566913~hmac=2639372581d5d9b5101e6a5139bc4c82e500a388fe69f7b0ed3c5be2d82126d0&w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Merch</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Movies">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/composition-cinema-elements-red-background-with-copy-space_23-2148457845.jpg?t=st=1655567577~exp=1655568177~hmac=a269d6a7eee8773784f55cd4583d75bda6a399d79ef4a405a84dd507e97fcaa8&w=826"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Movies</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Motivational">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/checkmate-black-king-chess-board-success-concept_23-2148952317.jpg?t=st=1655568750~exp=1655569350~hmac=49b85c61586eea439d2634400ddd30097923de4669534caabcb24b96594b9784&w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Motivational</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Rap">
                      <div class="card-img">
                        <img
                          src="https://media.gq.com/photos/5f3aa9738f9d96b932abcdc3/4:3/w_1999,h_1499,c_limit/travis-scott-gq-cover-september-2020-a.jpg"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Rap</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Sci-Fi">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/empty-dark-room-modern-futuristic-sci-fi-background-3d-illustration_35913-2338.jpg?t=st=1655566553~exp=1655567153~hmac=51b30ecaa9a22d34ba2b361c08a09cad1d4b7f1e23854ae5ae8e6c504bdf5696&w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Sci-Fi</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Sports">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-photo/professional-sport-equipment-isolated-black-black-gym-weights_155003-42809.jpg?t=st=1655566608~exp=1655567208~hmac=ce39900b3eecb7dce0d8c66f7645fae7e439b1615ba5371a18b7d18808a006c8&w=740"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Sports</div>
                    </a>
                  </div>
                </div>
              </div>
              <div class="carousel-item">
                <div class="col-md-3">
                  <div class="card">
                    <a href="genre/Pop-Art">
                      <div class="card-img">
                        <img
                          src="https://img.freepik.com/free-vector/set-sexy-woman-mouths-pop-art-style_24911-52917.jpg?w=826"
                          class="img-fluid" />
                      </div>
                      <div class="card-img-overlay">Pop Art</div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <a class="carousel-control-prev bg-transparent w-aut" href="#recipeCarousel" role="button"
              data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </a>
            <a class="carousel-control-next bg-transparent w-aut" href="#recipeCarousel" role="button"
              data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </a>
          </div>
        </div>
      </div>

      <!--artists-->
      <h1 id="artists" class="center">Trending Artists</h1>
      <div class="container row-scroll">
        <div class="flex-row">

          <div class="col-lg-4 genre">
            <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg"
              role="img" aria-label="Placeholder: 140x140" preserveAspectRatio="xMidYMid slice" focusable="false">
              <title>Placeholder</title>
              <rect width="100%" height="100%" fill="#777" />
              <text x="50%" y="50%" fill="#777" dy=".3em">140x140</text>
            </svg>
            <h2 class="fw-normal">
            </h2>
            <p><a class="btn btn-secondary" href="#">View &raquo;</a></p>
          </div>

        </div>
      </div>
    </div>
    <% } else { %>
      <section id="login">
        <% if (message) {%>
          <div class="alert">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            <%= message %>
          </div>
          <% } %>
            <div class="login-box">
              <h2>Login</h2>
              <form action="/log-in" method="POST" autocomplete="no">
                <div class="user-box">
                  <input type="text" name="username" required="true">
                  <label>Username or Email</label>
                </div>
                <div class="user-box">
                  <input type="password" name="password" required="true">
                  <label>Password</label>
                </div>
                <button type="submit">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  Submit
                </button>
                <p id="sign-up-link">don't have an acount yet? <a href="/sign-up">sign up</a></p>
              </form>
            </div>
      </section>
      <%}%>

        <!--SCRIPTS-->

        <!--interactive background-->
        <script src="https://cdn.jsdelivr.net/npm/ogl@0.0.39/dist/ogl.umd.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.0.3/chroma.min.js"></script>
        <script src="/javascripts/animation-bg.js"></script>

        <!--algolia search-->
        <script src="javascripts/search.js"></script>

        <!--carousel-->
        <script>

          let items = document.querySelectorAll(".carousel .carousel-item");

          items.forEach((el) => {
            const minPerSlide = 4;
            let next = el.nextElementSibling;
            for (var i = 1; i < minPerSlide; i++) {
              if (!next) {
                // wrap carousel by using first child
                next = items[0];
              }
              let cloneChild = next.cloneNode(true);
              el.appendChild(cloneChild.children[0]);
              next = next.nextElementSibling;
            }
          });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
          crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
          crossorigin="anonymous"></script>
        <!--jquery-->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
        <!-- login-errors -->
        <script>
          // Get all elements with class="closebtn"
          var close = document.getElementsByClassName("closebtn");
          var i;

          // Loop through all close buttons
          for (i = 0; i < close.length; i++) {
            // When someone clicks on a close button
            close[i].onclick = function () {

              // Get the parent of <span class="closebtn"> (<div class="alert">)
              var div = this.parentElement;

              // Set the opacity of div to 0 (transparent)
              div.style.opacity = "0";

              // Hide the div after 600ms (the same amount of milliseconds it takes to fade out)
              setTimeout(function () { div.style.display = "none"; }, 600);
            }
          }
        </script>
        <!-- font awesome -->
        <script src="https://kit.fontawesome.com/563a5c9304.js" crossorigin="anonymous"></script>

        <!--bootstrap-->
        <script src="/javascripts/bootstrap.bundle.min.js"></script>
</body>

</html>